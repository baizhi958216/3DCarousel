"use strict";(()=>{var o=class{element;fullWidth;constructor(i,t){this.element=i,this.fullWidth=i.offsetWidth,this.element.style.display="inline-block",this.element.style.position="absolute",this.element.style.transformOrigin="0 0"}moveTo(i,t,e){this.element.style.zIndex=`${e*100|0}`,this.element.style.transform=`translate(${i}px, ${t}px) scale(${e})`}},r=class{element;options;items;xOrigin;yOrigin;xRadius;yRadius;farScale;rotation;destRotation;speed;timer;frontItemClass;onLoaded;onRendered;onAnimationFinished;itemOptions;lastTime;initTimer;constructor(i,t){this.element=i,this.options=t,this.items=[],this.xOrigin=t.xOrigin??i.clientWidth*.5,this.yOrigin=t.yOrigin??i.clientHeight*.1,this.xRadius=t.xRadius??i.clientWidth/2.3,this.yRadius=t.yRadius??i.clientHeight/6,this.farScale=t.farScale,this.rotation=this.destRotation=Math.PI/2,this.speed=t.speed,this.timer=0,this.frontItemClass=t.frontItemClass,this.onLoaded=t.onLoaded,this.onRendered=t.onRendered,this.onAnimationFinished=t.onAnimationFinished,this.itemOptions={},this.element.style.position="relative",this.element.style.overflow="hidden",this.lastTime=performance.now(),this.initTimer=setInterval(()=>{this.finishInit()},50)}renderItem=(i,t)=>{let e=this.items[i],a=Math.sin(t),s=this.farScale,n=s+(1-s)*(a+1)*.5;return e.moveTo(this.xOrigin+n*(Math.cos(t)*this.xRadius-e.fullWidth*.5),this.yOrigin+n*a*this.yRadius,n),e};render=()=>{let i=this.items.length,t=2*Math.PI/i,e=this.rotation,a=Math.round(this.floatIndex())%this.items.length;for(let s=0;s<i;s++){let n=this.renderItem(s,e);s===a?n.element.classList.add(this.frontItemClass):n.element.classList.remove(this.frontItemClass),e+=t}typeof this.onRendered=="function"&&this.onRendered(this)};playFrame=()=>{let i=this.destRotation-this.rotation,t=performance.now(),e=(t-this.lastTime)*.002;this.lastTime=t,Math.abs(i)<.003?(this.rotation=this.destRotation,this.pause(),typeof this.onAnimationFinished=="function"&&this.onAnimationFinished()):(this.rotation=this.destRotation-i/(1+this.speed*e),this.scheduleNextFrame()),this.render()};scheduleNextFrame=()=>{this.lastTime=performance.now(),this.timer=window.requestAnimationFrame(this.playFrame)};itemsRotated=()=>this.items.length*(Math.PI/2-this.rotation)/(2*Math.PI);floatIndex=()=>{let i=this.items.length,t=this.itemsRotated()%i;return t<0?t+i:t};play=()=>{this.timer===0&&this.scheduleNextFrame()};pause=()=>{window.cancelAnimationFrame(this.timer),this.timer=0};go=i=>{this.destRotation+=2*Math.PI/this.items.length*i,this.play()};goTo=i=>{let t=this.items.length,e=i-this.floatIndex()%t;return 2*Math.abs(e)>t&&(e-=e>0?t:-t),this.destRotation=this.rotation,this.go(-e),e};finishInit=()=>{clearInterval(this.initTimer);let i=this.element.getElementsByClassName(`${this.options.itemClass}`);for(let t=0;t<i.length;t++)this.items.push(new o(i[t],this.itemOptions)),i[t].addEventListener("mousedown",()=>this.goTo(t)),this.render()}},l=(h={farScale:.5,speed:4,itemClass:"carousel-item",handle:document.getElementById("carousel")})=>{new r(h.handle,h)};})();
